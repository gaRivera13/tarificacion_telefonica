<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Administrador</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
</head>
<body>
  <div class="container" role="main">
    <header>
      <div class="left">
        <button
          aria-label="Volver a la página anterior"
          type="button"
          class="btn-volver"
          title="Volver"
          onclick="history.back()"
        ></button>
        <img
          alt="Icono pequeño cuadrado con fondo azul y símbolo blanco"
          height="28"
          src="https://storage.googleapis.com/a1aa/image/60054b82-944f-446f-f6cb-aaeb8a7164d8.jpg"
          width="28"
        />
        <span>Administrador</span>
      </div>
      <div class="right">
        <button aria-label="Perfil de usuario - ir a página de perfil" type="button" style="height:32px; width:32px; display:flex; align-items:center; justify-content:center;">
          <img
            alt="Icono de usuario cuadrado con fondo azul y silueta blanca"
            height="32"
            src="https://storage.googleapis.com/a1aa/image/60da4d8f-f031-4c4e-3af8-02f83b828ecb.jpg"
            width="32"
          />
        </button>
      </div>
    </header>
    <main aria-label="Contenido principal">
        <section>
            <div class="title" role="heading" aria-level="2">Gestión de Facultades</div>
            <table>
              <thead>
                <tr>
                  <th style="width: 40%;">Nombre Facultad</th>
                  <th style="width: 20%;">Siglas</th>
                  <th style="width: 40%;">Acciones</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let fac of facultades">
                  <td>
                    <ng-container *ngIf="editarFacultadId === fac.id_facultad; else nombreFacultad">
                      <input [(ngModel)]="editNombreFacultad" />
                    </ng-container>
                    <ng-template #nombreFacultad>{{ fac.nombre_facultad }}</ng-template>
                  </td>
                  <td>
                    <ng-container *ngIf="editarFacultadId === fac.id_facultad; else siglasFacultad">
                      <input [(ngModel)]="editSiglasFacultad" />
                    </ng-container>
                    <ng-template #siglasFacultad>{{ fac.siglas_facultad }}</ng-template>
                  </td>
                  <td class="action-buttons">
                    <ng-container *ngIf="editarFacultadId === fac.id_facultad; else verFacultad">
                      <button (click)="guardarCambiosFacultad(fac.id_facultad)"><i class="fas fa-save"></i></button>
                      <button (click)="cancelarEdicionFacultad()"><i class="fas fa-times"></i></button>
                    </ng-container>
                    <ng-template #verFacultad>
                      <button (click)="editarFacultad(fac)"><i class="fas fa-edit"></i></button>
                      <button (click)="eliminarFacultad(fac.id_facultad)"><i class="fas fa-trash-alt"></i></button>
                    </ng-template>
                  </td>
                </tr>
                <tr *ngIf="facultades.length === 0">
                  <td colspan="3">No hay facultades registradas.</td>
                </tr>
              </tbody>
            </table>
          
            <footer>
              <button class="add-btn" (click)="abrirModalAgregarFacultad()">Agregar</button>
            </footer>
        </section>  
    </main>
  </div>
</body>
</html>

<!-- Modal para agregar nueva facultad -->
<div class="modal" *ngIf="mostrarModalAgregarFacultad" style="display: flex;">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-title-facultad">
      <h2 id="modal-title-facultad">Agregar Facultad</h2>
  
      <label for="nombreFacultad">Nombre:</label>
      <input id="nombreFacultad" type="text" [(ngModel)]="nuevoNombreFacultad" />
  
      <label for="siglasFacultad" class="mt-4">Siglas:</label>
      <input id="siglasFacultad" type="text" [(ngModel)]="nuevasSiglasFacultad" />
  
      <div class="modal-buttons">
        <button type="button" class="add-btn" (click)="confirmarAgregarFacultad()">Guardar</button>
        <button type="button" class="add-btn cancel" (click)="cerrarModalAgregarFacultad()">Cancelar</button>
      </div>
    </div>
  </div>
  


